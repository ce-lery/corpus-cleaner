\doxysection{LSHDeduplicator Class Reference}
\hypertarget{classLSHDeduplicator}{}\label{classLSHDeduplicator}\index{LSHDeduplicator@{LSHDeduplicator}}


{\ttfamily \#include $<$minhash.\+hpp$>$}

\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classLSHDeduplicator_ad52a46449c6b17eba3a6f2726c135989}{LSHDeduplicator}} (bool onlin\+\_\+dedupe, string blacklist\+\_\+path, bool store\+\_\+blacklist, size\+\_\+t total\+\_\+backet\+\_\+size\+\_\+mb)
\item 
\mbox{\hyperlink{classLSHDeduplicator_ae320ee2f21265abbd0d70dcc6975a974}{\texorpdfstring{$\sim$}{\string~}\+LSHDeduplicator}} ()
\item 
bool \mbox{\hyperlink{classLSHDeduplicator_a74b28771fcac6f0827e1a3d57d15077c}{Apply}} (const vector$<$ string $>$ \texorpdfstring{$\ast$}{*}lshs)
\begin{DoxyCompactList}\small\item\em Calculate minhash list of text. \end{DoxyCompactList}\item 
size\+\_\+t \mbox{\hyperlink{classLSHDeduplicator_a63ba5d735e5907bba228d27d1eba78ad}{Size\+Of\+Seen}} (void)
\begin{DoxyCompactList}\small\item\em Calculate size of blacklist (rough estimate) \end{DoxyCompactList}\item 
size\+\_\+t \mbox{\hyperlink{classLSHDeduplicator_a2d1049e62118fbef5af639e2a9f1e1f0}{Size\+Of\+Blacklist}} (void)
\begin{DoxyCompactList}\small\item\em Calculate size of blacklist (rough estimate) \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classLSHDeduplicator_a0c92e2a7937901849e32c61c64f64350}{Initialize\+Seen}} (void)
\begin{DoxyCompactList}\small\item\em Initialize seen parameter. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classLSHDeduplicator_aeefe98b7ef2a504691ce70ca18e9fd7f}{Store\+Blacklist}} (void)
\begin{DoxyCompactList}\small\item\em Save Blacklist to file. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classLSHDeduplicator_ae46ce3d4a5bda70fcaed1817d31c8dab}{Load\+Blacklist\+To\+Seen}} (void)
\begin{DoxyCompactList}\small\item\em Read Blacklist from file. \end{DoxyCompactList}\item 
size\+\_\+t \mbox{\hyperlink{classLSHDeduplicator_a0c41faad843855f924f2cce561b047d9}{Get\+Total\+Bucket\+Size}} (void)
\begin{DoxyCompactList}\small\item\em Read Blacklist from file. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classLSHDeduplicator_a3bdaf9d05243c84367d54571a5584866}{Initialize\+Blacklist}} (void)
\begin{DoxyCompactList}\small\item\em Initialize blacklist parameter. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}


Definition at line \mbox{\hyperlink{minhash_8hpp_source_l00028}{28}} of file \mbox{\hyperlink{minhash_8hpp_source}{minhash.\+hpp}}.



\doxysubsection{Constructor \& Destructor Documentation}
\Hypertarget{classLSHDeduplicator_ad52a46449c6b17eba3a6f2726c135989}\label{classLSHDeduplicator_ad52a46449c6b17eba3a6f2726c135989} 
\index{LSHDeduplicator@{LSHDeduplicator}!LSHDeduplicator@{LSHDeduplicator}}
\index{LSHDeduplicator@{LSHDeduplicator}!LSHDeduplicator@{LSHDeduplicator}}
\doxysubsubsection{\texorpdfstring{LSHDeduplicator()}{LSHDeduplicator()}}
{\footnotesize\ttfamily LSHDeduplicator\+::\+LSHDeduplicator (\begin{DoxyParamCaption}\item[{bool}]{onlin\+\_\+dedupe = {\ttfamily true},  }\item[{string}]{blacklist\+\_\+path = {\ttfamily "{}"{}},  }\item[{bool}]{store\+\_\+blacklist = {\ttfamily false},  }\item[{size\+\_\+t}]{total\+\_\+backet\+\_\+size\+\_\+mb = {\ttfamily 5120} }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{minhash_8cpp_source_l00140}{140}} of file \mbox{\hyperlink{minhash_8cpp_source}{minhash.\+cpp}}.

\Hypertarget{classLSHDeduplicator_ae320ee2f21265abbd0d70dcc6975a974}\label{classLSHDeduplicator_ae320ee2f21265abbd0d70dcc6975a974} 
\index{LSHDeduplicator@{LSHDeduplicator}!````~LSHDeduplicator@{\texorpdfstring{$\sim$}{\string~}LSHDeduplicator}}
\index{````~LSHDeduplicator@{\texorpdfstring{$\sim$}{\string~}LSHDeduplicator}!LSHDeduplicator@{LSHDeduplicator}}
\doxysubsubsection{\texorpdfstring{\texorpdfstring{$\sim$}{\string~}LSHDeduplicator()}{\string~LSHDeduplicator()}}
{\footnotesize\ttfamily LSHDeduplicator\+::\texorpdfstring{$\sim$}{\string~}\+LSHDeduplicator (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{minhash_8cpp_source_l00155}{155}} of file \mbox{\hyperlink{minhash_8cpp_source}{minhash.\+cpp}}.



\doxysubsection{Member Function Documentation}
\Hypertarget{classLSHDeduplicator_a74b28771fcac6f0827e1a3d57d15077c}\label{classLSHDeduplicator_a74b28771fcac6f0827e1a3d57d15077c} 
\index{LSHDeduplicator@{LSHDeduplicator}!Apply@{Apply}}
\index{Apply@{Apply}!LSHDeduplicator@{LSHDeduplicator}}
\doxysubsubsection{\texorpdfstring{Apply()}{Apply()}}
{\footnotesize\ttfamily bool LSHDeduplicator\+::\+Apply (\begin{DoxyParamCaption}\item[{const vector$<$ string $>$ \texorpdfstring{$\ast$}{*}}]{lshs }\end{DoxyParamCaption})}



Calculate minhash list of text. 

Duplication is determined based on the hash value generated by {\ttfamily \doxylink{classGenerateDedupLSH}{Generate\+Dedup\+LSH}}. ~\newline
 If the target corpus is approximately 10\texorpdfstring{$^\wedge$}{\string^}6 or less (\texorpdfstring{$\sim$}{\string~}several 10 GB is a rough guide), ~\newline
 duplicate processing is possible without prior processing. ~\newline
 If you want to perform deduplication without preprocessing (online), set the {\ttfamily online\+\_\+dedup} flag to {\ttfamily True}. ~\newline
 The guaranteed value for {\ttfamily online\+\_\+dedup} is {\ttfamily True}. ~\newline


For larger corpora, it becomes difficult to store hash values ​​of all documents in memory. ~\newline
 Duplicate documents are considered to be a few percent of all documents, so ~\newline
 By reading only hash values ​​from a file as a blacklist, it is possible to process a corpus of several 100 GB. ~\newline


Reads duplicate hash values ​​from the file specified by {\ttfamily blacklist\+\_\+path}. blacklist files every other line Assume that the hash value generated by {\ttfamily \doxylink{classGenerateDedupLSH}{Generate\+Dedup\+LSH}} is recorded. ~\newline
 When the {\ttfamily store\+\_\+blacklist} flag is set to {\ttfamily True}, ~\newline
 duplicate hash values ​​will be recorded as a set of strings in the {\ttfamily LSHDeduplicator.\+blacklist} attribute. ~\newline
 This option is useful, for example, when creating a blacklist hash value file. ~\newline
 The default value of the {\ttfamily store\+\_\+blacklist} flag is {\ttfamily False}. ~\newline


Example\+: 
\begin{DoxyCode}{0}
\DoxyCodeLine{\mbox{\hyperlink{classGenerateDedupLSH}{GenerateDedupLSH}}\ generate\_dedup\_lsh;}
\DoxyCodeLine{d1\ =\ generate\_dedup\_lsh.\mbox{\hyperlink{classGenerateDedupLSH_a595391eddb3d3e37ab3e2e0c4d35bde3}{CalculateLSH}}(\textcolor{stringliteral}{"{}Hello,\ World."{}});}
\DoxyCodeLine{d2\ =\ generate\_dedup\_lsh.\mbox{\hyperlink{classGenerateDedupLSH_a595391eddb3d3e37ab3e2e0c4d35bde3}{CalculateLSH}}(\textcolor{stringliteral}{"{}吾輩は猫である。名前はまだ無い。どこで生まれたかとんと見当がつかぬ。"{}});}
\DoxyCodeLine{d3\ =\ generate\_dedup\_lsh.\mbox{\hyperlink{classGenerateDedupLSH_a595391eddb3d3e37ab3e2e0c4d35bde3}{CalculateLSH}}(\textcolor{stringliteral}{"{}吾輩は鳥である。名前はまだ無い。どこで生まれたかとんと見当がつかぬ。"{}});}
\DoxyCodeLine{\mbox{\hyperlink{classLSHDeduplicator}{LSHDeduplicator}}\ deduplicator;}
\DoxyCodeLine{cout\ <<\ deduplicator.\mbox{\hyperlink{classLSHDeduplicator_a74b28771fcac6f0827e1a3d57d15077c}{Apply}}(d1)\ <<\ endl;}
\DoxyCodeLine{\textcolor{comment}{//false}}
\DoxyCodeLine{cout\ <<\ deduplicator.\mbox{\hyperlink{classLSHDeduplicator_a74b28771fcac6f0827e1a3d57d15077c}{Apply}}(d2)\ <<\ endl;}
\DoxyCodeLine{\textcolor{comment}{//false}}
\DoxyCodeLine{cout\ <<\ deduplicator.\_deApply(d3)\ <<\ endl;}
\DoxyCodeLine{\textcolor{comment}{//true}}

\end{DoxyCode}
 
\begin{DoxyParams}{Parameters}
{\em vector$<$string$>$} & \texorpdfstring{$\ast$}{*}lshs\+: lshs list generated by \doxylink{classGenerateDedupLSH}{Generate\+Dedup\+LSH} \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
bool \+: duplication(true), or not duplication(false) \href{https://github.com/HojiChar/HojiChar/blob/v0.9.0/hojichar/filters/deduplication.py}{\texttt{ https\+://github.\+com/\+Hoji\+Char/\+Hoji\+Char/blob/v0.\+9.\+0/hojichar/filters/deduplication.\+py}} 
\end{DoxyReturn}
\begin{DoxyNote}{Note}

\end{DoxyNote}


Definition at line \mbox{\hyperlink{minhash_8cpp_source_l00200}{200}} of file \mbox{\hyperlink{minhash_8cpp_source}{minhash.\+cpp}}.

\Hypertarget{classLSHDeduplicator_a0c41faad843855f924f2cce561b047d9}\label{classLSHDeduplicator_a0c41faad843855f924f2cce561b047d9} 
\index{LSHDeduplicator@{LSHDeduplicator}!GetTotalBucketSize@{GetTotalBucketSize}}
\index{GetTotalBucketSize@{GetTotalBucketSize}!LSHDeduplicator@{LSHDeduplicator}}
\doxysubsubsection{\texorpdfstring{GetTotalBucketSize()}{GetTotalBucketSize()}}
{\footnotesize\ttfamily size\+\_\+t LSHDeduplicator\+::\+Get\+Total\+Bucket\+Size (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Read Blacklist from file. 


\begin{DoxyParams}{Parameters}
{\em void} & None \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
size\+\_\+t \+: size of blacklist 
\end{DoxyReturn}
\begin{DoxyNote}{Note}

\end{DoxyNote}


Definition at line \mbox{\hyperlink{minhash_8cpp_source_l00381}{381}} of file \mbox{\hyperlink{minhash_8cpp_source}{minhash.\+cpp}}.

\Hypertarget{classLSHDeduplicator_a3bdaf9d05243c84367d54571a5584866}\label{classLSHDeduplicator_a3bdaf9d05243c84367d54571a5584866} 
\index{LSHDeduplicator@{LSHDeduplicator}!InitializeBlacklist@{InitializeBlacklist}}
\index{InitializeBlacklist@{InitializeBlacklist}!LSHDeduplicator@{LSHDeduplicator}}
\doxysubsubsection{\texorpdfstring{InitializeBlacklist()}{InitializeBlacklist()}}
{\footnotesize\ttfamily void LSHDeduplicator\+::\+Initialize\+Blacklist (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Initialize blacklist parameter. 

Example\+: 
\begin{DoxyParams}{Parameters}
{\em void} & None \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
size\+\_\+t \+: size of seen 
\end{DoxyReturn}
\begin{DoxyNote}{Note}

\end{DoxyNote}


Definition at line \mbox{\hyperlink{minhash_8cpp_source_l00331}{331}} of file \mbox{\hyperlink{minhash_8cpp_source}{minhash.\+cpp}}.

\Hypertarget{classLSHDeduplicator_a0c92e2a7937901849e32c61c64f64350}\label{classLSHDeduplicator_a0c92e2a7937901849e32c61c64f64350} 
\index{LSHDeduplicator@{LSHDeduplicator}!InitializeSeen@{InitializeSeen}}
\index{InitializeSeen@{InitializeSeen}!LSHDeduplicator@{LSHDeduplicator}}
\doxysubsubsection{\texorpdfstring{InitializeSeen()}{InitializeSeen()}}
{\footnotesize\ttfamily void LSHDeduplicator\+::\+Initialize\+Seen (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Initialize seen parameter. 

Caluclate size of seen. The step is following. Example\+: \doxylink{classGenerateDedupLSH}{Generate\+Dedup\+LSH} generate\+\_\+dedupe\+\_\+lsh(3); 
\begin{DoxyParams}{Parameters}
{\em void} & None \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
size\+\_\+t \+: size of seen 
\end{DoxyReturn}
\begin{DoxyNote}{Note}

\end{DoxyNote}


Definition at line \mbox{\hyperlink{minhash_8cpp_source_l00300}{300}} of file \mbox{\hyperlink{minhash_8cpp_source}{minhash.\+cpp}}.

\Hypertarget{classLSHDeduplicator_ae46ce3d4a5bda70fcaed1817d31c8dab}\label{classLSHDeduplicator_ae46ce3d4a5bda70fcaed1817d31c8dab} 
\index{LSHDeduplicator@{LSHDeduplicator}!LoadBlacklistToSeen@{LoadBlacklistToSeen}}
\index{LoadBlacklistToSeen@{LoadBlacklistToSeen}!LSHDeduplicator@{LSHDeduplicator}}
\doxysubsubsection{\texorpdfstring{LoadBlacklistToSeen()}{LoadBlacklistToSeen()}}
{\footnotesize\ttfamily void LSHDeduplicator\+::\+Load\+Blacklist\+To\+Seen (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Read Blacklist from file. 


\begin{DoxyParams}{Parameters}
{\em void} & None \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
size\+\_\+t \+: size of blacklist 
\end{DoxyReturn}
\begin{DoxyNote}{Note}

\end{DoxyNote}


Definition at line \mbox{\hyperlink{minhash_8cpp_source_l00361}{361}} of file \mbox{\hyperlink{minhash_8cpp_source}{minhash.\+cpp}}.

\Hypertarget{classLSHDeduplicator_a2d1049e62118fbef5af639e2a9f1e1f0}\label{classLSHDeduplicator_a2d1049e62118fbef5af639e2a9f1e1f0} 
\index{LSHDeduplicator@{LSHDeduplicator}!SizeOfBlacklist@{SizeOfBlacklist}}
\index{SizeOfBlacklist@{SizeOfBlacklist}!LSHDeduplicator@{LSHDeduplicator}}
\doxysubsubsection{\texorpdfstring{SizeOfBlacklist()}{SizeOfBlacklist()}}
{\footnotesize\ttfamily size\+\_\+t LSHDeduplicator\+::\+Size\+Of\+Blacklist (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Calculate size of blacklist (rough estimate) 


\begin{DoxyParams}{Parameters}
{\em void} & None \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
size\+\_\+t \+: size of blacklist 
\end{DoxyReturn}
\begin{DoxyNote}{Note}

\end{DoxyNote}


Definition at line \mbox{\hyperlink{minhash_8cpp_source_l00265}{265}} of file \mbox{\hyperlink{minhash_8cpp_source}{minhash.\+cpp}}.

\Hypertarget{classLSHDeduplicator_a63ba5d735e5907bba228d27d1eba78ad}\label{classLSHDeduplicator_a63ba5d735e5907bba228d27d1eba78ad} 
\index{LSHDeduplicator@{LSHDeduplicator}!SizeOfSeen@{SizeOfSeen}}
\index{SizeOfSeen@{SizeOfSeen}!LSHDeduplicator@{LSHDeduplicator}}
\doxysubsubsection{\texorpdfstring{SizeOfSeen()}{SizeOfSeen()}}
{\footnotesize\ttfamily size\+\_\+t LSHDeduplicator\+::\+Size\+Of\+Seen (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Calculate size of blacklist (rough estimate) 


\begin{DoxyParams}{Parameters}
{\em void} & None \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
size\+\_\+t \+: size of blacklist 
\end{DoxyReturn}
\begin{DoxyNote}{Note}

\end{DoxyNote}


Definition at line \mbox{\hyperlink{minhash_8cpp_source_l00232}{232}} of file \mbox{\hyperlink{minhash_8cpp_source}{minhash.\+cpp}}.

\Hypertarget{classLSHDeduplicator_aeefe98b7ef2a504691ce70ca18e9fd7f}\label{classLSHDeduplicator_aeefe98b7ef2a504691ce70ca18e9fd7f} 
\index{LSHDeduplicator@{LSHDeduplicator}!StoreBlacklist@{StoreBlacklist}}
\index{StoreBlacklist@{StoreBlacklist}!LSHDeduplicator@{LSHDeduplicator}}
\doxysubsubsection{\texorpdfstring{StoreBlacklist()}{StoreBlacklist()}}
{\footnotesize\ttfamily void LSHDeduplicator\+::\+Store\+Blacklist (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Save Blacklist to file. 


\begin{DoxyParams}{Parameters}
{\em void} & None \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
size\+\_\+t \+: size of blacklist 
\end{DoxyReturn}
\begin{DoxyNote}{Note}

\end{DoxyNote}


Definition at line \mbox{\hyperlink{minhash_8cpp_source_l00344}{344}} of file \mbox{\hyperlink{minhash_8cpp_source}{minhash.\+cpp}}.



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
/home/corpus-\/cleaner/corpus\+\_\+cleaner/\mbox{\hyperlink{minhash_8hpp}{minhash.\+hpp}}\item 
/home/corpus-\/cleaner/corpus\+\_\+cleaner/\mbox{\hyperlink{minhash_8cpp}{minhash.\+cpp}}\end{DoxyCompactItemize}
